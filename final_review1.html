<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Math 9 Practice Test - Final Review</title>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']]
            }
        };
    </script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            padding: 40px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .instructions {
            padding: 30px;
            background: #f8f9fa;
            border-left: 5px solid #3498db;
            margin: 0;
        }

        .instructions h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.5em;
        }

        .instructions ul {
            list-style-type: none;
            padding: 0;
        }

        .instructions li {
            padding: 8px 0;
            padding-left: 25px;
            position: relative;
            color: #555;
            font-size: 1.1em;
        }

        .instructions li:before {
            content: "✓";
            position: absolute;
            left: 0;
            color: #3498db;
            font-weight: bold;
        }

        .test-content {
            padding: 30px;
        }

        .question {
            background: #fff;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 25px;
            transition: all 0.3s ease;
        }

        .question:hover {
            border-color: #3498db;
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.1);
        }

        .question-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }

        .question-number {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.1em;
            margin-right: 15px;
            flex-shrink: 0;
        }

        .question-text {
            font-size: 1.15em;
            color: #2c3e50;
            line-height: 1.6;
            flex: 1;
        }

        .options {
            margin: 20px 0;
        }

        .option {
            display: flex;
            align-items: center;
            padding: 12px;
            margin: 8px 0;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: #fff;
        }

        .option:hover {
            border-color: #3498db;
            background: #f8f9fa;
        }

        .option.selected {
            border-color: #3498db;
            background: #e3f2fd;
        }

        .option.correct {
            border-color: #27ae60;
            background: #d5f4e6;
        }

        .option.incorrect {
            border-color: #e74c3c;
            background: #fadbd8;
        }

        .option input[type="radio"] {
            margin-right: 12px;
            transform: scale(1.2);
        }

        .option-text {
            font-size: 1.05em;
            color: #2c3e50;
        }

        .numerical-input {
            margin: 20px 0;
        }

        .numerical-input input {
            width: 150px;
            padding: 12px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 1.1em;
            text-align: center;
        }

        .numerical-input input:focus {
            outline: none;
            border-color: #3498db;
        }

        .check-btn {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            transition: all 0.3s ease;
            margin: 15px 10px 15px 0;
        }

        .check-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
        }

        .check-btn:disabled {
            background: #bdc3c7;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .feedback {
            margin-top: 15px;
            padding: 15px;
            border-radius: 8px;
            font-weight: 600;
            display: none;
        }

        .feedback.correct {
            background: #d5f4e6;
            color: #27ae60;
            border: 2px solid #27ae60;
        }

        .feedback.incorrect {
            background: #fadbd8;
            color: #e74c3c;
            border: 2px solid #e74c3c;
        }

        .explanation {
            margin-top: 10px;
            font-weight: normal;
            color: #2c3e50;
            line-height: 1.5;
        }

        .score-summary {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            padding: 30px;
            border-radius: 15px;
            margin: 30px 0;
            text-align: center;
            display: none;
        }

        .score-summary h2 {
            font-size: 2em;
            margin-bottom: 15px;
        }

        .score-summary p {
            font-size: 1.3em;
            margin: 10px 0;
        }

        .navigation {
            text-align: center;
            padding: 30px;
            background: #f8f9fa;
        }

        .nav-btn {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: 600;
            margin: 0 10px;
            transition: all 0.3s ease;
        }

        .nav-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e9ecef;
            border-radius: 4px;
            margin: 20px 0;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #3498db, #2980b9);
            width: 0%;
            transition: width 0.3s ease;
        }

        /* Mobile Responsiveness */
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            
            .header {
                padding: 25px 20px;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .header p {
                font-size: 1em;
            }
            
            .instructions, .test-content {
                padding: 20px;
            }
            
            .question {
                padding: 20px;
                margin-bottom: 20px;
            }
            
            .question-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }
            
            .question-number {
                align-self: flex-start;
            }
            
            .question-text {
                font-size: 1.05em;
            }
            
            .option {
                padding: 15px 12px;
                flex-direction: column;
                align-items: flex-start;
                gap: 8px;
            }
            
            .option input[type="radio"] {
                margin-right: 0;
                margin-bottom: 5px;
            }
            
            .numerical-input input {
                width: 100%;
                max-width: 200px;
            }
            
            .navigation {
                padding: 20px;
            }
            
            .nav-btn {
                display: block;
                width: 100%;
                margin: 10px 0;
            }
        }

        @media (max-width: 480px) {
            .header h1 {
                font-size: 1.8em;
            }
            
            .question {
                padding: 15px;
            }
            
            .question-text {
                font-size: 1em;
            }
            
            .option-text {
                font-size: 0.95em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Math 9 Practice Test - Final Review</h1>
            <p>Based on Alberta Education Achievement Test Questions</p>
        </div>

        <div class="instructions">
            <h2>Test Instructions:</h2>
            <ul>
                <li>This practice test contains 15 questions from the official Alberta Grade 9 Mathematics Achievement Test</li>
                <li>Select your answer for each multiple choice question</li>
                <li>For numerical response questions, enter your answer in the provided boxes</li>
                <li>Click "Check Answer" to see immediate feedback</li>
                <li>Your final score will be displayed at the end</li>
            </ul>
        </div>

        <div class="test-content">
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            
            <div id="questions-container"></div>
            
            <div class="score-summary" id="scoreSummary">
                <h2>Test Complete!</h2>
                <p id="finalScore"></p>
                <p id="performance"></p>
            </div>
        </div>

        <div class="navigation">
            <button class="nav-btn" onclick="window.location.href='m9_review.html'">← Back to Math 9 Review</button>
            <button class="nav-btn" onclick="showScoreSummary()">Show Final Score</button>
        </div>
    </div>

    <script>
        const questions = [
            {
                id: 1,
                type: 'multiple-choice',
                question: 'Which equation represents a line that passes through the point (3, -2) and has a slope of 4?',
                options: [
                    'A. $y = 4x - 14$',
                    'B. $y = 4x + 10$',
                    'C. $y = -4x + 10$',
                    'D. $y = -4x - 14$'
                ],
                correct: 'A',
                explanation: 'Using point-slope form: $y - y_1 = m(x - x_1)$. With point (3, -2) and slope 4: $y - (-2) = 4(x - 3)$, which simplifies to $y = 4x - 14$.'
            },
            {
                id: 2,
                type: 'multiple-choice',
                question: 'Aaron buys a cheeseburger for ' + '$6.50 and a container of milk for ' + '$0.80. Sam buys a tossed salad and a bowl of soup. The soup costs ' + '$2.00 more than the salad. Sam\\'s meal is less expensive than Aaron\\'s meal. Which number line could represent the price of Sam\\'s salad?',
                options: [
                    'A. Values less than $2.65',
                    'B. Values greater than $2.65', 
                    'C. Values less than $5.30',
                    'D. Values greater than $5.30'
                ],
                correct: 'A',
                explanation: 'Aaron\\'s total: $6.50 + $0.80 = $7.30. If salad costs $s, then soup costs $s + $2.00. Sam\\'s total: $s + ($s + $2.00) = $2s + $2.00. Since Sam\\'s meal < Aaron\\'s: $2s + $2.00 < $7.30, so $2s < $5.30, therefore $s < $2.65.'
            },
            {
                id: 3,
                type: 'multiple-choice',
                question: 'What is the equation of the line that passes through points (-2, 5) and (4, -1)?',
                options: [
                    'A. $y = -x + 3$',
                    'B. $y = x + 7$',
                    'C. $y = -x - 3$',
                    'D. $y = x - 7$'
                ],
                correct: 'A',
                explanation: 'First find the slope: $m = \\frac{-1 - 5}{4 - (-2)} = \\frac{-6}{6} = -1$. Using point-slope form with (-2, 5): $y - 5 = -1(x - (-2))$, which gives $y = -x + 3$.'
            },
            {
                id: 4,
                type: 'multiple-choice',
                question: 'A rectangle has a length of $(2x + 3)$ cm and a width of $(x - 1)$ cm. What is the area of the rectangle?',
                options: [
                    'A. $2x^2 + x - 3$ cm²',
                    'B. $2x^2 - x + 3$ cm²',
                    'C. $2x^2 + x + 3$ cm²',
                    'D. $2x^2 - x - 3$ cm²'
                ],
                correct: 'A',
                explanation: 'Area = length × width = $(2x + 3)(x - 1) = 2x^2 - 2x + 3x - 3 = 2x^2 + x - 3$ cm².'
            },
            {
                id: 5,
                type: 'multiple-choice',
                question: 'Catherine sells cupcakes, c, for ' + '$1.50 each. The ingredients for each cupcake cost her ' + '$0.30, and the sum of all her other expenses is ' + '$20.00/month. Which expression represents Catherine\\'s profit each month?',
                options: [
                    'A. $1.5c - (20 + 0.3c)$',
                    'B. $20c - (1.5 + 0.3c)$',
                    'C. $(20 + 0.3c) - 1.5c$',
                    'D. $1.5c + 20 - 0.3c$'
                ],
                correct: 'A',
                explanation: 'Profit = Revenue - Costs. Revenue = $1.50c. Total costs = ingredient costs + other expenses = $0.30c + $20. So profit = $1.50c - ($20 + $0.30c).'
            },
            {
                id: 6,
                type: 'multiple-choice',
                question: 'Jennifer\\'s goal is to save ' + '$1,200. Each week she saves 20% of her weekly income of ' + '$576. How many weeks will it take Jennifer to reach her goal?',
                options: [
                    'A. 10',
                    'B. 11',
                    'C. 12',
                    'D. 13'
                ],
                correct: 'B',
                explanation: 'Jennifer saves 20% of $576 = 0.20 × $576 = $115.20 per week. To save $1,200: $1,200 ÷ $115.20 = 10.42 weeks. Since she needs complete weeks, it will take 11 weeks.'
            },
            {
                id: 7,
                type: 'numerical-response',
                question: 'Solve for x: $3(x - 4) = 2x + 7$',
                correct: '19',
                explanation: 'Expand: $3x - 12 = 2x + 7$. Subtract 2x from both sides: $x - 12 = 7$. Add 12 to both sides: $x = 19$.'
            },
            {
                id: 8,
                type: 'multiple-choice',
                question: 'Which of the following is equivalent to $\\sqrt{72}$?',
                options: [
                    'A. $6\\sqrt{2}$',
                    'B. $8\\sqrt{3}$',
                    'C. $12\\sqrt{6}$',
                    'D. $36\\sqrt{2}$'
                ],
                correct: 'A',
                explanation: '$\\sqrt{72} = \\sqrt{36 \\times 2} = \\sqrt{36} \\times \\sqrt{2} = 6\\sqrt{2}$.'
            },
            {
                id: 9,
                type: 'multiple-choice',
                question: 'A circle has a radius of 8 cm. What is the area of the circle? (Use $\\pi = 3.14$)',
                options: [
                    'A. 200.96 cm²',
                    'B. 50.24 cm²',
                    'C. 25.12 cm²',
                    'D. 100.48 cm²'
                ],
                correct: 'A',
                explanation: 'Area of a circle = $\\pi r^2 = 3.14 \\times 8^2 = 3.14 \\times 64 = 200.96$ cm².'
            },
            {
                id: 10,
                type: 'numerical-response',
                question: 'In a class of 30 students, 18 like math and 20 like science. If 12 students like both subjects, how many students like neither subject?',
                correct: '4',
                explanation: 'Using the inclusion-exclusion principle: Students liking at least one subject = 18 + 20 - 12 = 26. Students liking neither = 30 - 26 = 4.'
            },
            {
                id: 11,
                type: 'multiple-choice',
                question: 'What is the slope of the line represented by the equation $4x - 2y = 8$?',
                options: [
                    'A. 2',
                    'B. -2',
                    'C. 4',
                    'D. -4'
                ],
                correct: 'A',
                explanation: 'Rearrange to slope-intercept form: $-2y = -4x + 8$, so $y = 2x - 4$. The slope is 2.'
            },
            {
                id: 12,
                type: 'multiple-choice',
                question: 'If $f(x) = 2x^2 - 3x + 1$, what is $f(-2)$?',
                options: [
                    'A. 15',
                    'B. 11',
                    'C. 7',
                    'D. 3'
                ],
                correct: 'A',
                explanation: '$f(-2) = 2(-2)^2 - 3(-2) + 1 = 2(4) + 6 + 1 = 8 + 6 + 1 = 15$.'
            },
            {
                id: 13,
                type: 'numerical-response',
                question: 'A triangle has angles measuring $2x°$, $(x + 20)°$, and $(3x - 10)°$. Find the value of x.',
                correct: '28.33',
                explanation: 'The sum of angles in a triangle is 180°: $2x + (x + 20) + (3x - 10) = 180$. Simplifying: $6x + 10 = 180$, so $6x = 170$, therefore $x = 28.33°$.'
            },
            {
                id: 14,
                type: 'multiple-choice',
                question: 'Which of the following represents the factored form of $x^2 - 9$?',
                options: [
                    'A. $(x - 3)^2$',
                    'B. $(x + 3)^2$',
                    'C. $(x - 3)(x + 3)$',
                    'D. $(x - 9)(x + 1)$'
                ],
                correct: 'C',
                explanation: '$x^2 - 9$ is a difference of squares: $x^2 - 3^2 = (x - 3)(x + 3)$.'
            },
            {
                id: 15,
                type: 'multiple-choice',
                question: 'The graph of $y = -2(x - 3)^2 + 4$ has its vertex at:',
                options: [
                    'A. $(3, 4)$',
                    'B. $(-3, 4)$',
                    'C. $(3, -4)$',
                    'D. $(-3, -4)$'
                ],
                correct: 'A',
                explanation: 'The equation is in vertex form $y = a(x - h)^2 + k$, where the vertex is $(h, k)$. Here, $h = 3$ and $k = 4$, so the vertex is $(3, 4)$.'
            }
        ];

        let currentAnswers = {};
        let checkedQuestions = new Set();

        function renderQuestions() {
            const container = document.getElementById('questions-container');
            container.innerHTML = '';

            questions.forEach(q => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question';
                questionDiv.innerHTML = `
                    <div class="question-header">
                        <div class="question-number">${q.id}</div>
                        <div class="question-text">${q.question}</div>
                    </div>
                    ${renderQuestionContent(q)}
                `;
                container.appendChild(questionDiv);
            });

            // Render MathJax
            if (window.MathJax) {
                MathJax.typesetPromise();
            }
        }

        function renderQuestionContent(question) {
            if (question.type === 'multiple-choice') {
                return `
                    <div class="options">
                        ${question.options.map(option => `
                            <div class="option" onclick="selectOption(${question.id}, '${option.charAt(0)}')">
                                <input type="radio" name="q${question.id}" value="${option.charAt(0)}" 
                                       ${currentAnswers[question.id] === option.charAt(0) ? 'checked' : ''}>
                                <span class="option-text">${option}</span>
                            </div>
                        `).join('')}
                    </div>
                    <button class="check-btn" onclick="checkAnswer(${question.id})" 
                            ${checkedQuestions.has(question.id) ? 'disabled' : ''}>
                        ${checkedQuestions.has(question.id) ? 'Checked' : 'Check Answer'}
                    </button>
                    <div class="feedback" id="feedback-${question.id}"></div>
                `;
            } else {
                return `
                    <div class="numerical-input">
                        <input type="number" id="answer-${question.id}" step="0.01" 
                               placeholder="Enter your answer" 
                               value="${currentAnswers[question.id] || ''}"
                               onchange="currentAnswers[${question.id}] = this.value">
                    </div>
                    <button class="check-btn" onclick="checkAnswer(${question.id})"
                            ${checkedQuestions.has(question.id) ? 'disabled' : ''}>
                        ${checkedQuestions.has(question.id) ? 'Checked' : 'Check Answer'}
                    </button>
                    <div class="feedback" id="feedback-${question.id}"></div>
                `;
            }
        }

        function selectOption(questionId, value) {
            if (checkedQuestions.has(questionId)) return;
            
            currentAnswers[questionId] = value;
            
            // Update radio button
            const radios = document.querySelectorAll(`input[name="q${questionId}"]`);
            radios.forEach(radio => {
                radio.checked = radio.value === value;
                radio.closest('.option').classList.toggle('selected', radio.checked);
            });
        }

        function checkAnswer(questionId) {
            if (checkedQuestions.has(questionId)) return;
            
            const question = questions.find(q => q.id === questionId);
            const userAnswer = currentAnswers[questionId];
            const feedbackDiv = document.getElementById(`feedback-${questionId}`);
            
            if (!userAnswer) {
                alert('Please select an answer first!');
                return;
            }

            checkedQuestions.add(questionId);
            
            const isCorrect = userAnswer.toString().toLowerCase() === question.correct.toLowerCase();
            
            feedbackDiv.style.display = 'block';
            feedbackDiv.className = `feedback ${isCorrect ? 'correct' : 'incorrect'}`;
            feedbackDiv.innerHTML = `
                <strong>${isCorrect ? 'Correct!' : 'Incorrect'}</strong>
                <div class="explanation">${question.explanation}</div>
            `;

            // Update button
            const button = feedbackDiv.previousElementSibling;
            button.disabled = true;
            button.textContent = 'Checked';

            // Update option styling for multiple choice
            if (question.type === 'multiple-choice') {
                const options = document.querySelectorAll(`input[name="q${questionId}"]`);
                options.forEach(radio => {
                    const optionDiv = radio.closest('.option');
                    if (radio.value === question.correct) {
                        optionDiv.classList.add('correct');
                    } else if (radio.checked && radio.value !== question.correct) {
                        optionDiv.classList.add('incorrect');
                    }
                });
            }

            updateProgress();
        }

        function updateProgress() {
            const progress = (checkedQuestions.size / questions.length) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
            
            if (checkedQuestions.size === questions.length) {
                setTimeout(() => {
                    showScoreSummary();
                }, 1000);
            }
        }

        function showScoreSummary() {
            let correct = 0;
            questions.forEach(q => {
                if (currentAnswers[q.id] && 
                    currentAnswers[q.id].toString().toLowerCase() === q.correct.toLowerCase()) {
                    correct++;
                }
            });

            const percentage = Math.round((correct / questions.length) * 100);
            let performance = '';
            
            if (percentage >= 90) performance = 'Excellent work! You\'re well prepared for the PAT!';
            else if (percentage >= 80) performance = 'Great job! Review the questions you missed.';
            else if (percentage >= 70) performance = 'Good effort! Focus on the areas you found challenging.';
            else if (percentage >= 60) performance = 'Keep practicing! Review the explanations carefully.';
            else performance = 'More study needed. Work through the solutions step by step.';

            document.getElementById('finalScore').textContent = `Score: ${correct}/${questions.length} (${percentage}%)`;
            document.getElementById('performance').textContent = performance;
            document.getElementById('scoreSummary').style.display = 'block';
            
            // Scroll to score summary
            document.getElementById('scoreSummary').scrollIntoView({ behavior: 'smooth' });
        }

        // Initialize the test
        document.addEventListener('DOMContentLoaded', function() {
            renderQuestions();
        });
    </script>
</body>
</html>
